
const stocksData = [
    {
        id: 2452,
        image: "./image/computer1.jpg",
        Product: "HP 3000",
        Color: "Silver",
        Material:"Electronics",
        Cost: "3600.00",
        status: "Avail",
        stars: "★"       
        
    },


    {
        id: 9803,
        image: "./image/computer2.jpg",
        Product: "Apple Computer",
        Color: "Grey",
        Material:"Electronics",
        Cost: "4600.00",
        status: "Avail",
        stars: "★★★★★"
    },


    {
        id: 3000,
        image: "./image/computer3.jpg",
        Product: "Dell Computer",
        Color: "Black",
        Material:"Electronics",
        Cost: "4400.00",
        status: "Avail",
        stars: "★★★"
   
    },

    {
        id: 4094,
        image: "./image/computer4.jpg",
        Product: "Accer Computer",
        Color: "Yellow",
        Material:"Electronics",
        Cost: "6000.00",
        status: "Avail",
        stars: "★★★★"
    },

    {
        id: 5992,
        image: "./image/computer5.jpg",
        Product: "IBM PC",
        Color: "Grey",
        Material:"Electronics",
        Cost: "5600.00",
        status: "Avail",
        stars: "★★★★★" 
    },

    {
        id: 62543,
        image: "./image/computer6.png",
        Product: "Lenovo",
        Color: "Black",
        Material:"Electronics",
        Cost: "5550.00",
        status: "Avail",
        stars: "★★★★★" 
    },

    {
        id: 1107,
        image: "./image/computer7.jpg",
        Product: "Dell Computer",
        Color: "Grey",
        Material:"Electronics",
        Cost: "7750.00",
        status: "Avail",
        stars: "★★★★★"

    },

    {
        id: 8987,
        image: "./image/computer8.jpg",
        Product: "HP Computer",
        Color: "Grey",
        Material:"Electronics",
        Cost: "4500.00",
        status: "Avail",
        stars: "★★★★★"

    },

    {
        id: 2219,
        image: "./image/computer9.jpg",
        Product: "Huawei Computer",
        Color: "Grey",
        Material:"Electronics",
        Cost: "6600.00",
        status: "Avail",
        stars: "★★★★★"

    },

    {
        id: 1010,
        image: "./image/computer10.jpg",
        Product: "HP Computer",
        Color: "Black",
        Material:"Electronics",
        Cost: "3000.00",
        status: "Avail",
        stars: "★★★★★"

    },

    {
        id: 1091,
        image: "./image/shoe1.jpg",
        Product: "Shoe",
        Color: "Light Blue",
        Material:"leather",
        Cost: "60.00",
        status: "Avail",
        stars: "★★★"

    },

    {
        id: 1100,
        image: "./image/shoe2.jpg",
        Product: "Shoe",
        Color: "Green and Blue",
        Material:"leather",
        Cost: "60.00",
        status: "Avail",
        stars: "★★★"

    },


    {
        id: 1101,
        image: "./image/shoe3.jpg",
        Product: "Shoe",
        Color: "Black",
        Material:"leather",
        Cost: "65.00",
        status: "Avail",
        stars: "★★★"
    },


    {
        id: 1110,
        image: "./image/shoe4.jpg",
        Product: "Shoe",
        Color: "Yellow White Blue",
        Material:"leather",
        Cost: "69.00",
        status: "Avail",
        stars: "★★★"
    },

    {
        id: 1120,
        image: "./image/shoe5.jpg",
        Product: "Shoe",
        Color: "Yellow White",
        Material:"leather",
        Cost: "69.00",
        status: "Avail",
        stars: "★★★"
    },


    {
        id: 1130,
        image: "./image/shoe6.jpg",
        Product: "Shoe",
        Color: "Red Black White",
        Material:"leather",
        Cost: "70.00",
        status: "Avail",
        stars: "★★★★★"
    },

    {
        id: 1140,
        image: "./image/shoe7.jpg",
        Product: "Shoe",
        Color: "Blue",
        Material:"leather",
        Cost: "62.00",
        status: "Avail",
        stars: "★★★★★"
    },

    {
        id: 1230,
        image: "./image/shoe8.jpg",
        Product: "Shoe",
        Color: "Red",
        Material:"leather",
        Cost: "70.00",
        status: "Avail",
        stars: "★★★★★"
    },

    {
        id: 1235,
        image: "./image/shoe9.jpg",
        Product: "Shoe",
        Color: "Blue and Brown",
        Material:"leather",
        Cost: "100.00",
        status: "Avail",
        stars: "★★★★"
    },

    {
        id: 1255,
        image: "./image/shoe10.jpg",
        Product: "Shoe",
        Color: "Yellow",
        Material:"leather",
        Cost: "150.00",
        status: "Avail",
        stars: "★★★★"
    },

    {
        id: 1278,
        image: "./image/shoe11.jpg",
        Product: "Shoe",
        Color: "Navy Blue",
        Material:"leather",
        Cost: "130.00",
        status: "Avail",
        stars: "★★★★"
    },

    {
        id: 1977,
        image: "./image/suit1.jpg",
        Product: "Office Suit",
        Color: "Dark Black",
        Material:"Cotton",
        Cost: "1100.00",
        status: "Avail",
        stars: "★★★★"
    },

    {
        id: 20011,
        image: "./image/suit2.jpg",
        Product: "Office Suit",
        Color: "Assorted Colors",
        Material:"Primed cotton",
        Cost: "2500.00",
        status: "Avail",
        stars: "★★★★"
    },

    {
        id: 2080,
        image: "./image/suit3.jpg",
        Product: "Toxedo Suit",
        Color: "Assorted Colors",
        Material:"Primed cotton",
        Cost: "1500.00",
        status: "Avail",
        stars: "★★★★"
    },

    {
        id: 1549,
        image: "./image/suit4.jpg",
        Product: "Toxedo Suit",
        Color: "Blue",
        Material:"Primed cotton",
        Cost: "2600.00",
        status: "Avail",
        stars: "★★★"
    },

    {
        id: 1611,
        image: "./image/suit5.jpg",
        Product: "Suit",
        Color: "grey",
        Material:"Primed cotton",
        Cost: "1100.00",
        status: "Avail",
        stars: "★★★"
    },

    {
        id: 1667,
        image: "./image/suit6.jpg",
        Product: "Toxedo Suit",
        Color: "Dark Black",
        Material:"Primed cotton",
        Cost: "1200.00",
        status: "Avail",
        stars: "★★★"
    },

    {
        id: 1867,
        image: "./image/suit7.jpg",
        Product: "Toxedo Suit",
        Color: "Dark Blue",
        Material:"Primed cotton",
        Cost: "1600.00",
        status: "Avail",
        stars: "★★★"
    },

    {
        id: 1878,
        image: "./image/suit8.jpg",
        Product: "Toxedo Suit",
        Color: "Dark Blue",
        Material:"Primed cotton",
        Cost: "1800.00",
        status: "Avail",
        stars: "★★★"
    },
    
    {
        id: 1857,
        image: "./image/shirt1.jpg",
        Product: "Chekered Bolo shirt",
        Color: "Blue white",
        Material:"Primed cotton",
        Cost: "200.00",
        status: "Avail",
        stars: "★★★"
    },

    {
        id: 1820,
        image: "./image/shirt2.jpg",
        Product: "Emando shirt",
        Color: "Light Blue",
        Material:"Primed cotton",
        Cost: "150.00",
        status: "Avail",
        stars: "★★★"
    },

    {
        id: 1823,
        image: "./image/shirt3.jpg",
        Product: "Ladies shirt",
        Color: "Creamy white",
        Material:"Primed cotton",
        Cost: "150.00",
        status: "Avail",
        stars: "★★★"
    }
   


]


stocksData.forEach(({id, image, Product, Color, Material, Cost, status, stars})=>{
    const mainContainer = document.querySelector('.items__container');    
   
    const descriptiveItems = `
            <div class="item">
                <div class="image">
                    <img src=${image} alt="">                    
                    <div class="barge__status">${status}</div>
                </div>
                
                <div class="description">
                     <div class="product-code">
                        <span>Pdt Code</span>
                        <span class="item-code">${id}</span>
                    </div>
                    <div class="title">
                        <span>Product</span>
                        <span class="item-product">${Product}</span>
                    </div>
                    <div class="color">
                        <span>Color</span>
                        <span class="item-color">${Color}</span>
                    </div>
                    <div class="texture">
                        <span>Material</span>
                        <span class="item-material">${Material}</span>
                    </div>
                    <div class="cost">
                        <span>Cost in Ghc</span>                                                   
                        <span class="item-cost">${Cost}</span>                                                    
                    </div>
                     <div class="status">
                        <span>Status</span>
                        <span class="item-status">${status}</span>
                    </div>
                      <div class="star">
                        <span>Preview</span>
                        <span class="item-stars">${stars}</span>
                    </div>
                </div>               

                <div class="transact__btns">
                    <div class="view__btn">
                        <span>View</span>
                    </div>
                    <div class="cart__btn">
                        <span>Cart</span>
                    </div>
                </div>
            </div>         
    
    `
    mainContainer.innerHTML+=descriptiveItems
    
    
})

window.addEventListener('scroll', () => {
  const nav = document.querySelector('nav');

  if (window.scrollY > 0) {
    nav.classList.add('scrolledup');
    nav.classList.remove('scrolleddn');
  } else {
    nav.classList.remove('scrolledup');
    nav.classList.add('scrolleddn');
  }
});


// ==================== Cart Visibility Control  =============================

const asideOverlay = document.querySelector('aside');
const cartBtns = document.querySelectorAll('.cart__btn') 
const closeCartBtn = document.querySelector('.close__btn');

const displayCart = ()=>{
    asideOverlay.style.visibility='visible';
}

cartBtns.forEach((cartBtn, index) =>{    

    cartBtn.addEventListener('click', ()=>{
        displayCart();
        let parentTransactBtns = cartBtn.parentElement;        
        let siblingDescription = parentTransactBtns.previousElementSibling;        
        let siblingDescriptionChildred = siblingDescription.children;
        

        const lastSpans = Array.from(siblingDescriptionChildred).map(ele=>{
            const spans = ele.querySelectorAll('span')
            return spans[1].textContent
        })

        
        const productCode = lastSpans[0];
        const prodcutName = lastSpans[1];
        const unitPrice = lastSpans[4];
        

        const cartTableBody = document.querySelector('tbody');

        const existingRow = Array.from(cartTableBody.querySelectorAll('tr')).find(row=>{
            
            return row.children[0]?.textContent === productCode;                       
                                 
        })       
         
        

        if(!existingRow){
        const quantityInput = parentTransactBtns.querySelector('input[type="number"]');
        const quantity =  parseInt(quantityInput?.value, 10) || 1;        
        const cost = quantity * unitPrice;

        const cartTableRow = document.createElement('tr');
        
        cartTableRow.innerHTML=`
                            <td>${productCode}</td> 
                            <td>${prodcutName}</td>
                            <td>${unitPrice}</td>
                            <td><input id="quantity" class="pdt-qty" type="number" value=${quantity} placeholder="" min="1"></td>
                            <td>${cost.toFixed(2)}</td>
                            <td><button class="remove-btn">Delete</button></td>`                           
         
         
         cartTableBody.appendChild(cartTableRow) 

        //  ========================================================== 

         updateCartTable()
        }            
       
    })

})

function updateCartTable(){
    const cartTableBody = document.querySelector('tbody');
    const cartRows = Array.from(cartTableBody.querySelectorAll('tr'));
    
    let grandTotal = 0;

    cartRows.forEach(row =>{
        const quantityCell = row.querySelector('input');
        const pdtyQty = parseInt(quantityCell?.value) || 1;

        const unitPdtCostCell = row.children[2]
        const unitPdtCost = parseFloat(unitPdtCostCell.textContent)
        const subTotalCell = row.children[4]          
        const subTotal = pdtyQty*unitPdtCost.toFixed(2);

        subTotalCell.textContent = subTotal

        grandTotal+=subTotal
             
    })   
    
    const grandTotalElement = document.querySelector('#grand')
    grandTotalElement.textContent = grandTotal
        
 
}

// ==================== click input to get the subtotal price ==============
document.querySelector('#cart__table').addEventListener('input', (e)=>{
    if(e.target.classList.contains('pdt-qty')){
        updateCartTable()
    }
})

// =================== click to remove a row of product ================
document.querySelector('#cart__table').addEventListener('click', (e)=>{
    if(e.target.classList.contains('remove-btn')){
        e.target.closest('tr').remove()
        updateCartTable()
    }
})


const closeCart = ()=>{
    asideOverlay.style.visibility='hidden'       
}

closeCartBtn.addEventListener('click', closeCart)


//======================= clear all entries =======================
document.querySelector('.clear').addEventListener('click', ()=>{
    document.querySelector('tbody').innerHTML=''    
    updateCartTable()
    if(localStorage.getItem('cardInfo')){
        localStorage.remove('cardInfo')
    }
})


// ====================== Product view ==============================

const imageSection = document.querySelector('section.image-preview')
const viewBtns = document.querySelectorAll('.view__btn')

viewBtns.forEach(viewBtn =>{

    viewBtn.addEventListener('click', ()=>{

        imageSection.style.visibility='visible'
        const viewBtnParent_Element = viewBtn.parentElement;
        const viewBtnParent_ElementSibling = viewBtnParent_Element.previousElementSibling

        const viewBtnParent_ElementSiblingParent = viewBtnParent_ElementSibling.parentElement
        const viewBtnParent_ElementSiblingParentFirstChild = viewBtnParent_ElementSiblingParent.firstElementChild

        const imageVariable = viewBtnParent_ElementSiblingParentFirstChild.firstElementChild
        

        imageSection.innerHTML=`
                    <div class="enhanced">
            <div class="closeBtn">
                <span id="btnClose">&#9932</span>
            </div>
            <div class="view__image">
                <img src=${imageVariable.src} alt="">
            </div>`
    })
 
})


// ===============Close view page======================
imageSection.addEventListener('click', (e) => {
    if (e.target.id === 'btnClose') {
        imageSection.style.visibility = 'hidden'
    }
})


// ======================= Save cart information into local Storage ===================

const submitDataBtn = document.querySelector('.submit');
const cart__Table = document.querySelector('#cart__table');



submitDataBtn.addEventListener('click', ()=>{
    const cartData = [];

    const grandTotalPrice = document.querySelector('#grand').textContent.trim();
    console.log(grandTotalPrice)

    const cart__TableRows = cart__Table.querySelectorAll('tbody tr');

    cart__TableRows.forEach(row=>{
        const columns = row.querySelectorAll('td');        

        const cartItems = {
            productcode: columns[0]?.textContent.trim(),
            productname: columns[1]?.textContent.trim(),
            unitprice: parseInt(columns[2]?.textContent.trim(), 10),
            quantity: parseInt(columns[3]?.querySelector('input').value, 10),
            grandprice: parseInt(grandTotalPrice, 10) 
        }
               
        cartData.push(cartItems)        
    })
        localStorage.setItem('cartInfo', JSON.stringify(cartData))

        const savedInfo = JSON.parse(JSON.stringify(cartData));
        console.log(savedInfo)
        console.log(localStorage.getItem('cartInfo'))

        closeCart()
    
})

// ========================== search feature ==================================

const searchIcon = document.querySelector('.search small');
const searchInput = document.querySelector('#search-input');
const galleryItems = document.querySelectorAll('.item');

searchIcon.addEventListener('click', () => {
    const query = searchInput.value.toLowerCase();

    galleryItems.forEach(item => {
        const text = item.textContent.toLowerCase();
        item.style.display = text.includes(query) ? '' : 'none';
    });
});


// ============= Hamburger menu click and menu on mobile ==========

const hamburgerMeunIcon = document.querySelector('.menu-hanburgerIcon');
const menuItems = document.querySelectorAll('li');
const menuContainer = document.querySelector('.nav__container');

hamburgerMeunIcon.addEventListener('click', ()=>{

 (menuContainer.style.display=='none')? menuContainer.style.display='flex': menuContainer.style.display='none'
    
 console.log(menuContainer)
})



menuItems.forEach(menuItem=>{
    menuItem.addEventListener('click', ()=>{
       menuContainer.style.display='none'       
        console.log(menuContainer)
    })
})


console.log(menuContainer)



































