<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Stocks Data</title>
    <style>
        .main-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .stock-container {
            border: 1px solid #ccc;
            padding: 10px;
            width: 200px;
            text-align: center;
        }
        .image img {
            width: 100%;
            height: auto;
        }
        .title, .cost, .stars {
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="main-container"></div>

    <script>
        const mainContainer = document.querySelector('.main-container');
        let stocksData = []; // Initialize as empty

        // Function to fetch data from API and populate stocksData
        async function fetchStocksData() {
            try {
                // Replace with your actual API endpoint URL
                const response = await fetch('https://api.example.com/stocks');
                
                // Check if the response is OK
                if (!response.ok) {
                    throw new Error('Failed to fetch stocks data');
                }

                // Parse the JSON response
                const data = await response.json();

                // Update stocksData with fetched data (ensure it matches your object structure)
                stocksData = data.map((item, index) => ({
                    id: item.id || index + 1,
                    image: item.image || './stocks/default.jpg', // Set a default if image is missing
                    title: item.title || 'No Title',
                    cost: item.cost || '0.00',
                    stars: item.stars || '★★★'
                }));

                // Render the fetched data
                renderStocks(stocksData);

            } catch (error) {
                console.error('Error fetching stocks data:', error);
            }
        }

        // Function to render stocksData
        function renderStocks(stocks) {
            mainContainer.innerHTML = ''; // Clear any existing content

            stocks.forEach(obj => {
                const stockContainer = document.createElement('div');
                stockContainer.className = "stock-container";
                
                const imageDiv = document.createElement('div');
                imageDiv.className = "image";
                
                const theImage = document.createElement('img');
                theImage.src = obj.image;
                imageDiv.appendChild(theImage);
                stockContainer.appendChild(imageDiv);
                mainContainer.appendChild(stockContainer);

                const inforMation = document.createElement('div');
                inforMation.className = "info";

                const tiTle = document.createElement('div');
                tiTle.className = "title";
                const h4Element = document.createElement('h4');
                h4Element.innerText = obj.title;
                tiTle.appendChild(h4Element);
                inforMation.appendChild(tiTle);

                const coSt = document.createElement('div');
                coSt.className = "cost";
                const spanOne = document.createElement('span');
                spanOne.innerText = obj.cost;
                coSt.appendChild(spanOne);
                inforMation.appendChild(coSt);

                const staRs = document.createElement('div');
                staRs.className = "stars";
                const spanTwo = document.createElement('span');
                spanTwo.innerText = obj.stars;
                staRs.appendChild(spanTwo);
                inforMation.appendChild(staRs);

                stockContainer.appendChild(inforMation);
            });
        }

        // Call the fetch function to populate and render stocksData
        fetchStocksData();
    </script>
</body>
</html>
